(function(e){function t(t){for(var r,a,i=t[0],s=t[1],u=t[2],d=0,f=[];d<i.length;d++)a=i[d],o[a]&&f.push(o[a][0]),o[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);l&&l(t);while(f.length)f.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,i=1;i<n.length;i++){var s=n[i];0!==o[s]&&(r=!1)}r&&(c.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={1:0},c=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},a.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=s;c.push([13,0]),n()})({0:function(e,t){},13:function(e,t,n){e.exports=n("Vtdi")},"4Mqr":function(e,t,n){"use strict";var r=n("Vx2g"),o=n.n(r);o.a},BgvM:function(e,t,n){},K38S:function(e,t,n){},OXat:function(e,t,n){"use strict";var r=n("oXqg"),o=n.n(r);o.a},Vtdi:function(e,t,n){"use strict";n.r(t);n("ls82");var r=n("MECJ"),o=(n("VRzm"),n("Kw5r")),c=n("n3sq");n("+eM2"),n("LdiE"),n("K38S"),n("pKxC"),n("BgvM");function a(e){return i.apply(this,arguments)}function i(){return i=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",JSON.parse(localStorage.getItem(t)));case 1:case"end":return e.stop()}},e,this)})),i.apply(this,arguments)}function s(e,t){return u.apply(this,arguments)}function u(){return u=Object(r["a"])(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:localStorage.setItem(t,JSON.stringify(n));case 1:case"end":return e.stop()}},e,this)})),u.apply(this,arguments)}function l(e){return d.apply(this,arguments)}function d(){return d=Object(r["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:localStorage.removeItem(t);case 1:case"end":return e.stop()}},e,this)})),d.apply(this,arguments)}var f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.$store.state.credentials?n("application"):n("login")},p=[],m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container pt-1"},[n("b-navbar",{attrs:{toggleable:"md",type:"dark",variant:"info"}},[n("b-navbar-toggle",{attrs:{target:"nav_collapse"}}),e._v(" "),n("b-navbar-brand",[e._v("AWS Quick Look")]),e._v(" "),n("b-collapse",{attrs:{"is-nav":"",id:"nav_collapse"}},[n("b-navbar-nav",{staticClass:"ml-auto"},[n("b-nav-item",{attrs:{href:"https://github.com/awsql/awsql"}},[e._v("Github")]),e._v(" "),n("b-nav-item",{attrs:{href:"#"},on:{click:e.logout}},[e._v("Logout")])],1)],1)],1),e._v(" "),n("div",{staticClass:"mt-1"},[n("by-regions")],1)],1)},v=[],g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-list-group",e._l(e.regions,function(t){return n("b-list-group-item",{key:t.code,staticClass:"flex-column align-items-start list-group-item-action"},[n("div",{staticClass:"d-flex w-100 justify-content-between"},[n("span",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"reg-line-"+t.code,expression:"`reg-line-${reg.code}`"}],staticClass:"text flex-grow-1"},[e._v(e._s(t.name)+" ["+e._s(t.code)+"]")]),e._v(" "),n("div",{staticClass:"mr-2 count text-center"},[n("region-services-count",{attrs:{code:t.code}})],1),e._v(" "),n("div",{staticClass:"d-flex"},[n("popover-icon-region-loading",{staticClass:"mr-2",attrs:{code:t.code}}),e._v(" "),n("popover-icon-region-error",{attrs:{code:t.code}})],1)]),e._v(" "),n("b-collapse",{attrs:{id:"reg-line-"+t.code}},[n("b-card",{staticClass:"mt-2"},[n("region-details",{attrs:{code:t.code}})],1)],1)],1)}))],1)},h=[],b=n("yT7P"),_=[{code:"us-east-1",name:"US East (N. Virginia)"},{code:"us-east-2",name:"US East (Ohio)"},{code:"us-west-1",name:"US West (N. California)"},{code:"us-west-2",name:"US West (Oregon)"},{code:"ap-south-1",name:"Asia Pacific (Mumbai)"},{code:"ap-northeast-2",name:"Asia Pacific (Seoul)"},{code:"ap-northeast-3",name:"Asia Pacific (Osaka-Local)"},{code:"ap-southeast-1",name:"Asia Pacific (Singapore)"},{code:"ap-southeast-2",name:"Asia Pacific (Sydney)"},{code:"ap-northeast-1",name:"Asia Pacific (Tokyo)"},{code:"ca-central-1",name:"Canada (Central)"},{code:"eu-central-1",name:"EU (Frankfurt)"},{code:"eu-west-1",name:"EU (Ireland)"},{code:"eu-west-2",name:"EU (London)"},{code:"eu-west-3",name:"EU (Paris)"},{code:"sa-east-1",name:"South America (SÃ£o Paulo)"}],y=_,k=_.map(function(e){return e.code}),w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("icon",{class:!e.items.length&&"text-primary",attrs:{icon:e.icon,disabled:!e.items.length,spin:e.items.length},on:{click:e.click}},e._l(e.items,function(t,r){return n("div",{key:t,class:r&&"mt-2"},[e._v("\n    "+e._s(t)+"\n  ")])}))},x=[],O=(n("f3/d"),n("QVEU")),j=n.n(O),C=[{code:"ElasticBeanstalk",className:"ElasticBeanstalk",name:"Elastic Beanstalk",collections:[{code:"applications",name:"Applications",method:"describeApplications",resultPath:"Applications"},{code:"environments",name:"Environments",method:"describeEnvironments",resultPath:"Environments"}]},{code:"EC2",name:"EC2",className:"EC2",collections:[{code:"instances",name:"Instances",method:"describeInstances",resultPath:"Reservations"}]},{code:"Lambda",name:"Lambda",className:"Lambda",collections:[{code:"functions",name:"Functions",method:"listFunctions",resultPath:"Functions"}]}],S=C,E=C.map(function(e){return e.code}),P=j()(C.map(function(e){return Object(b["a"])({},e,{collections:j()(e.collections,"code")})}),"code"),R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(e.tag,{tag:"component"},[n("span",{staticClass:"fa",class:e.iconClass,attrs:{id:e.htmlId},on:{click:function(t){e.$emit("click")}}}),e._v(" "),n("b-popover",{attrs:{target:e.htmlId,triggers:"hover focus"}},[e._t("default")],2)],1)},$=[],A=n("oyJW"),q=0,I={props:{tag:{default:"div"},icon:{required:!0},spin:{},htmlId:{default:function(){return"popover-icon-".concat(q++)}}},computed:{iconClass:function(){var e;return e={},Object(A["a"])(e,"fa-".concat(this.icon),!0),Object(A["a"])(e,"fa-spin",this.spin),e}}},D=I,L=(n("4Mqr"),n("KHd+")),F=Object(L["a"])(D,R,$,!1,null,null,null),W=F.exports,K={props:["code"],computed:{items:function(){return this.$store.getters["regions/".concat(this.code,"/loadings")].map(function(e){var t=P[e.service].name,n=P[e.service].collections[e.collection].name;return"Loading ".concat(t," ").concat(n)})},icon:function(){return this.items.length<1?"sync-alt":"spinner"}},methods:{click:function(){this.items.length||(this.$store.dispatch("regions/resetRegionData",this.code),this.$store.dispatch("regions/loadRegionData",this.code))}},components:{Icon:W}},N=K,U=Object(L["a"])(N,w,x,!1,null,null,null),M=U.exports,J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("icon",{class:e.items.length&&"text-danger",attrs:{icon:"exclamation-circle",disabled:!e.items.length}},e._l(e.items,function(t,r){return n("div",{key:t,class:r&&"mt-2"},[e._v("\n    "+e._s(t)+"\n  ")])}))},V=[],B={props:["code"],computed:{items:function(){return this.$store.getters["regions/".concat(this.code,"/errors")].map(function(e){var t=P[e.service].name,n=P[e.service].collections[e.collection].name;return"".concat(t," ").concat(n,": ").concat(e.error)})}},components:{Icon:W}},T=B,G=Object(L["a"])(T,J,V,!1,null,null,null),Q=G.exports,X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e._v("[ "+e._s(e.count)+" ]")])},Y=[],H={props:["code"],computed:{count:function(){return this.$store.getters["regions/".concat(this.code,"/count")]}}},Z=H,z=Object(L["a"])(Z,X,Y,!1,null,null,null),ee=z.exports,te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("table",{staticClass:"table table-hover table-sm mb-0 no-first-border"},[n("tbody",e._l(e.services,function(t){return n("tr",{key:t.text},[n("td",[e._v(e._s(t.text))]),e._v(" "),n("td",{attrs:{width:"100px"}},[n("service-count",{attrs:{region:e.code,service:t.service,collection:t.collection}}),e._v(" "),n("service-data-provider",{attrs:{region:e.code,service:t.service,collection:t.collection},scopedSlots:e._u([{key:"default",fn:function(t){return t.loading?n("span",{staticClass:"fa fa-spinner fa-spin"}):e._e()}}])}),e._v(" "),n("service-data-provider",{attrs:{region:e.code,service:t.service,collection:t.collection},scopedSlots:e._u([{key:"default",fn:function(t){return t.error?n("info-icon",{staticClass:"text-danger",attrs:{tag:"span",icon:"exclamation-circle"}},[n("span",[e._v(e._s(t.error.toString()))])]):e._e()}}])})],1)])}))])])},ne=[],re=(n("rE2o"),n("ioFf"),n("rGqo"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e._v("[ "+e._s(e.count)+" ]")])}),oe=[],ce={props:["region","service","collection"],computed:{count:function(){return this.$store.state.regions[this.region][this.service][this.collection].items.length}}},ae=ce,ie=Object(L["a"])(ae,re,oe,!1,null,null,null),se=ie.exports,ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(e.tagName,{tag:"component"},[e._t("default",null,null,e.info)],2)},le=[],de={props:{tagName:{default:"span"},region:{},service:{},collection:{}},computed:{info:function(){return this.$store.state.regions[this.region][this.service][this.collection]}}},fe=de,pe=Object(L["a"])(fe,ue,le,!1,null,null,null),me=pe.exports,ve={props:["code"],computed:{services:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var o,c=S[Symbol.iterator]();!(t=(o=c.next()).done);t=!0){var a=o.value,i=!0,s=!1,u=void 0;try{for(var l,d=a.collections[Symbol.iterator]();!(i=(l=d.next()).done);i=!0){var f=l.value;e.push({service:a.code,collection:f.code,text:"".concat(a.name," ").concat(f.name)})}}catch(e){s=!0,u=e}finally{try{i||null==d.return||d.return()}finally{if(s)throw u}}}}catch(e){n=!0,r=e}finally{try{t||null==c.return||c.return()}finally{if(n)throw r}}return e}},components:{ServiceCount:se,ServiceDataProvider:me,InfoIcon:W}},ge=ve,he=(n("qWfr"),Object(L["a"])(ge,te,ne,!1,null,"60b145d0",null)),be=he.exports,_e={computed:{regions:function(){return y.map(function(e){return Object(b["a"])({},e)})},loadings:function(){return this.$store.getters["regions/loadings"]}},methods:{},components:{RegionDetails:be,RegionServicesCount:ee,PopoverIconRegionLoading:M,PopoverIconRegionError:Q}},ye=_e,ke=(n("OXat"),Object(L["a"])(ye,g,h,!1,null,"e69417b0",null)),we=ke.exports,xe={name:"main-page",created:function(){this.$store.dispatch("regions/loadAllData")},methods:{logout:function(e){e.preventDefault(),l("credentials"),this.$store.commit("setCredentials",void 0)}},components:{ByRegions:we}},Oe=xe,je=Object(L["a"])(Oe,m,v,!1,null,null,null),Ce=je.exports,Se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container pt-5"},[n("h1",[e._v("AWS Quick Look")]),e._v(" "),n("b-alert",{attrs:{show:""}},[e._v("\n    This is backendless application works directly with AWS APIs. Your credentials will be stored only in your browser.\n  ")]),e._v(" "),n("b-form",{on:{submit:e.onSubmit}},[n("b-form-group",{attrs:{label:"AWS access key ID:"}},[n("b-form-input",{attrs:{type:"text",required:"",placeholder:"Enter AWS access key ID"},model:{value:e.loginForm.aws_access_key_id,callback:function(t){e.$set(e.loginForm,"aws_access_key_id",t)},expression:"loginForm.aws_access_key_id"}})],1),e._v(" "),n("b-form-group",{attrs:{label:"AWS secret access key:"}},[n("b-form-input",{attrs:{type:"text",required:"",placeholder:"Enter AWS secret access key"},model:{value:e.loginForm.aws_secret_access_key,callback:function(t){e.$set(e.loginForm,"aws_secret_access_key",t)},expression:"loginForm.aws_secret_access_key"}})],1),e._v(" "),n("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Submit")]),e._v(" "),n("a",{staticClass:"btn float-right",attrs:{href:"https://github.com/awsql/awsql"}},[n("span",{staticClass:"fab fa-github"}),e._v(" GitHub")])],1)],1)},Ee=[],Pe={data:function(){return{loginForm:{aws_access_key_id:"",aws_secret_access_key:""}}},methods:{onSubmit:function(e){e.preventDefault(),s("credentials",this.loginForm),this.$store.commit("setCredentials",this.loginForm)}}},Re=Pe,$e=Object(L["a"])(Re,Se,Ee,!1,null,null,null),Ae=$e.exports,qe={components:{Application:Ce,Login:Ae}},Ie=qe,De=Object(L["a"])(Ie,f,p,!1,null,null,null),Le=De.exports,Fe=(n("hhXQ"),n("L2JU")),We=n("VJLA"),Ke=n.n(We),Ne=n("TYy9"),Ue=n.n(Ne),Me=n("0YDr"),Je=n.n(Me),Ve=(n("dRSK"),n("Sp1i")),Be=n.n(Ve),Te=n("mwIZ"),Ge=n.n(Te),Qe=n("xmWZ"),Xe=n("qpph"),Ye=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0;Object(Qe["a"])(this,e),this.pendingPromises=0,this.maxPendingPromises=t,this.queue=[]}return Object(Xe["a"])(e,[{key:"add",value:function(e){var t=this;return new Promise(function(n,r){t.queue.push({promiseGenerator:e,resolve:n,reject:r}),t._dequeue()})}},{key:"_dequeue",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!(this.pendingPromises>=this.maxPendingPromises)){e.next=2;break}return e.abrupt("return",!1);case 2:if(t=this.queue.shift(),t){e.next=5;break}return e.abrupt("return",!1);case 5:return this.pendingPromises++,e.prev=6,e.next=9,t.promiseGenerator();case 9:n=e.sent,t.resolve(n),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](6),t.reject(e.t0);case 16:this.pendingPromises--,this._dequeue();case 18:case"end":return e.stop()}},e,this,[[6,13]])}));return function(){return e.apply(this,arguments)}}()}]),e}(),He=new Ye(10);function Ze(e,t,n){return He.add(Object(r["a"])(regeneratorRuntime.mark(function r(){var o,c,a,i;return regeneratorRuntime.wrap(function(r){while(1)switch(r.prev=r.next){case 0:return o=S.find(function(e){var n=e.code;return n===t}),c=o.collections.find(function(e){var t=e.code;return t===n}),a=new Be.a[o.className]({region:e}),r.next=5,a[c.method]().promise();case 5:return i=r.sent,r.abrupt("return",Ge()(i,c.resultPath));case 7:case"end":return r.stop()}},r,this)})))}function ze(e){Be.a.config.credentials=e&&new Be.a.Credentials(e.aws_access_key_id,e.aws_secret_access_key)}var et,tt="collections";function nt(e){console.info("onversionchange",e)}function rt(){return et||(et=new Promise(function(e,t){var n=indexedDB.open("AWSQL_STORE",1);n.onsuccess=function(t){var n=t.target.result;n.onversionchange=nt,e(n)},n.onerror=function(){return t(n.error)},n.onupgradeneeded=function(e){var t=e.target.result;t.onversionchange=nt;var n={unique:!1};if(!t.objectStoreNames.contains(tt)){var r=t.createObjectStore(tt,{keyPath:"key"});r.createIndex("region","region",n),r.createIndex("service","service",n),r.createIndex("collection","collection",n)}}})),et}function ot(e){return rt().then(function(t){return new Promise(function(n,r){return e(t,n,r)})})}function ct(e){var t=function(e,t,n){return"".concat(e,"_").concat(t,"_").concat(n)};return{get:function(n,r,o){var c=t(n,r,o);return ot(function(t,n,r){var o=t.transaction(e).objectStore(e).get(c);o.onsuccess=function(){return n(o.result)},o.onerror=function(){return r(o.error)}})},set:function(n,r,o,c){var a=t(n,r,o);return ot(function(t,i,s){var u={key:a,region:n,service:r,collection:o,items:c,date:new Date},l=t.transaction([e],"readwrite").objectStore(e).put(u);l.onsuccess=i(u),l.onerror=function(){return s(l.error)}})}}}var at=ct(tt);function it(e){return{namespaced:!0,state:Ke()(e.map(function(e){return e.code}),e.map(function(){return{loading:!1,items:[],error:void 0}})),getters:{loadings:function(e){return Object.keys(e).filter(function(t){return e[t].loading})},errors:function(e){return Object.keys(e).filter(function(t){return e[t].error}).map(function(t){return{collection:t,error:e[t].error}})},count:function(e){return Je()(Object.values(e).map(function(e){return e.items.length}))}},mutations:{setCollectionKey:function(e,t){var n=t.collection,r=t.key,o=t.value;e[n][r]=o},resetCollection:function(e,t){e[t]={loading:!1,items:[],error:void 0}}}}}function st(){return{namespaced:!0,modules:Ke()(E,S.map(function(e){var t=e.collections;return it(t)})),getters:{loadings:function(e,t){return Ue()(Object.keys(e).map(function(e){return t["".concat(e,"/loadings")].map(function(t){return{service:e,collection:t}})}))},errors:function(e,t){return Ue()(Object.keys(e).map(function(e){return t["".concat(e,"/errors")].map(function(t){return Object(b["a"])({},t,{service:e})})}))},count:function(e,t){return Je()(Object.keys(e).map(function(e){return t["".concat(e,"/count")]}))}}}}o["a"].use(Fe["a"]);var ut={namespaced:!0,getters:{loadings:function(e,t){return Ue()(Object.keys(e).map(function(e){return t["".concat(e,"/loadings")].map(function(t){return Object(b["a"])({},t,{region:e})})}))},errors:function(e,t){return Ue()(Object.keys(e).map(function(e){return t["".concat(e,"/errors")].map(function(t){return Object(b["a"])({},t,{region:e})})}))},count:function(e,t){return Je()(Object.keys(e).map(function(e){return t["".concat(e,"/count")]}))}},modules:Ke()(k,k.map(st)),actions:{loadCollectionData:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,n){var r,o,c,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=n.service,o=n.region,c=n.collection,t.commit("".concat(o,"/").concat(r,"/setCollectionKey"),{collection:c,key:"loading",value:!0}),e.prev=2,e.next=5,at.get(o,r,c);case 5:if(i=e.sent,!(i&&i.date&&Date.now()-i.date.getTime()>6e4)){e.next=10;break}a=i.items,e.next=15;break;case 10:return e.next=12,Ze(o,r,c);case 12:return a=e.sent,e.next=15,at.set(o,r,c,a);case 15:t.commit("".concat(o,"/").concat(r,"/setCollectionKey"),{collection:c,key:"items",value:a}),e.next=22;break;case 18:e.prev=18,e.t0=e["catch"](2),console.log("fail",r,o,c,e.t0),t.commit("".concat(o,"/").concat(r,"/setCollectionKey"),{collection:c,key:"error",value:e.t0});case 22:t.commit("".concat(o,"/").concat(r,"/setCollectionKey"),{collection:c,key:"loading",value:!1});case 23:case"end":return e.stop()}},e,this,[[2,18]])}));return function(t,n){return e.apply(this,arguments)}}(),loadRegionData:function(e,t){var n=e.state,r=e.dispatch;for(var o in n[t])for(var c in n[t][o])r("loadCollectionData",{region:t,service:o,collection:c})},loadAllData:function(e){var t=e.state,n=e.dispatch;for(var r in t)n("loadRegionData",r)},resetRegionData:function(e,t){var n=e.state,r=e.commit;for(var o in n[t])for(var c in n[t][o])r("".concat(t,"/").concat(o,"/resetCollection"),c)},resetAllData:function(e){var t=e.state,n=e.dispatch;for(var r in t)n("resetRegionData",r)}}},lt=new Fe["a"].Store({state:{credentials:void 0},mutations:{setCredentials:function(e,t){ze(t),e.credentials=t}},actions:{},modules:{regions:ut}});o["a"].use(c["a"]),o["a"].config.productionTip=!1,new o["a"]({store:lt,created:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a("credentials");case 2:t=e.sent,this.$store.commit("setCredentials",t);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),render:function(e){return e(Le)}}).$mount("#app")},Vx2g:function(e,t,n){},oL95:function(e,t,n){},oXqg:function(e,t,n){},pKxC:function(e,t,n){},qWfr:function(e,t,n){"use strict";var r=n("oL95"),o=n.n(r);o.a}});
//# sourceMappingURL=app.e1c9cbd4.js.map